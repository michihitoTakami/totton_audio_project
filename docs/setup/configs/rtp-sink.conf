# PipeWire RTP Sink Configuration
#
# このファイルを ~/.config/pipewire/pipewire.conf.d/ にコピーして使用します。
#
# 使い方:
#   mkdir -p ~/.config/pipewire/pipewire.conf.d
#   cp docs/setup/configs/rtp-sink.conf ~/.config/pipewire/pipewire.conf.d/
#   systemctl --user restart pipewire pipewire-pulse
#
# 確認:
#   pactl list sinks short | grep rtp
#

context.modules = [
    {   name = libpipewire-module-rtp-sink
        args = {
            # ========================================
            # ネットワーク設定
            # ========================================

            # 送信元IPアドレス (0.0.0.0 = 全インターフェース)
            local.ip = "0.0.0.0"

            # 送信先IPアドレス
            # - マルチキャスト: 224.0.0.56 (推奨)
            # - ユニキャスト: Magic BoxのIPアドレス (例: 192.168.1.10)
            destination.ip = "224.0.0.56"
            destination.port = 46000

            # MTU (Maximum Transmission Unit)
            # 1280 = 安全な値（ほとんどのネットワークで動作）
            mtu = 1280

            # TTL (Time-To-Live)
            # 1 = 同一サブネットのみ
            # 32 = ローカルネットワーク全体
            ttl = 32

            # ========================================
            # 音声フォーマット
            # ========================================

            # フォーマット: S16 (16bit) / S24 (24bit) / S32 (32bit)
            format = "S16"

            # サンプリングレート: 44100 / 48000 / 96000 / 192000
            audio.rate = 44100

            # チャンネル数: 2 (ステレオ) / 1 (モノラル)
            audio.channels = 2

            # ========================================
            # ストリーム設定
            # ========================================

            stream.props = {
                # ノード名（内部識別子）
                node.name = "rtp-sink"

                # 表示名（PulseAudio/PipeWireで表示される名前）
                node.description = "RTP Network Sink"

                # メディアクラス（Audio/Sinkは必須）
                media.class = "Audio/Sink"

                # レイテンシ設定（オプション）
                # 形式: "サンプル数/サンプリングレート"
                # 例: "128/44100" = 約2.9ms
                # node.latency = "256/44100"
            }
        }
    }
]
